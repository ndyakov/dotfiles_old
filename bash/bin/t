#!/bin/bash
#
# Functions for changing font-size in
# xfce4-terminal
function fontsize {
  if [ $1 ]; then
    change_fontsize $1
    exit
  fi
  echo `grep 'FontName' ~/.config/xfce4/terminal/terminalrc | rev | cut -d ' ' -f 1 | rev`
}

function change_fontsize {
  NEWSIZE=$1
  SUBSTITUTION='s/FontName\(.*\) [[:digit:]]\+/FontName\1 '$NEWSIZE'/g'
  sed -i "$SUBSTITUTION" ~/.config/xfce4/terminal/terminalrc
}

function background_darkness_percentage {
  if [ $1 ]; then
    change_bg $1
    exit
  fi
  echo `grep 'BackgroundDarkness' ~/.config/xfce4/terminal/terminalrc | rev | cut -d '.' -f 1 | rev`
}

function change_bg {
  NEWPERCENTAGE=$1
  if [ $NEWPERCENTAGE -gt 99 ]; then
    NEWPERCENTAGE=99
  fi
  SUBSTITUTION='s/BackgroundDarkness=0.[[:digit:]]\+/BackgroundDarkness=0.'$NEWPERCENTAGE'/g'
  sed -i "$SUBSTITUTION" ~/.config/xfce4/terminal/terminalrc
}

function bg {
  CURRENT=`background_darkness_percentage`
  if [ $1 ]; then
    change_bg $((CURRENT + $1))
    exit
  fi
  echo $CURRENT
}

function zoom {
  if [ "$1" == "restore" ] || [ "$1" == "r" ]; then
    $1
    exit
  fi
  STEP=$1
  SIZE=`fontsize`
  NEWSIZE=$((SIZE + STEP))
  change_fontsize $NEWSIZE
}

function zoomin {
  zoom +2
}

function zoomout {
  zoom -2
}

function restore {
  change_fontsize 12
}

function fs {
  fontsize $1
}

function z {
  zoom $1
}

function zo {
  zoomout
}

function zi {
  zoomin
}

function r {
  restore
}

function + {
  zoomin
}

function - {
  zoomout
}

function = {
  restore
}

$1 $2
